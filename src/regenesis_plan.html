<!DOCTYPE html>

<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="mobile-web-app-capable" content="yes">
    <title>
        ReGenesis Plan - HackMD
    </title>
    <link rel="icon" type="image/png" href="https://hackmd.io/favicon.png">
    <link rel="apple-touch-icon" href="https://hackmd.io/apple-touch-icon.png">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/ionicons/2.0.1/css/ionicons.min.css" integrity="sha256-3iu9jgsy9TpTwXKb7bNQzqWekRX7pPK+2OLj3R922fo=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/octicons/3.5.0/octicons.min.css" integrity="sha256-QiWfLIsCT02Sdwkogf6YMiQlj4NE84MKkzEMkZnMGdg=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.5.1/themes/prism.min.css" integrity="sha256-vtR0hSWRc3Tb26iuN2oZHt3KRUomwTufNIf5/4oeCyg=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@hackmd/emojify.js@2.1.0/dist/css/basic/emojify.min.css" integrity="sha256-UOrvMOsSDSrW6szVLe8ZDZezBxh5IoIfgTwdNDgTjiU=" crossorigin="anonymous" />
    <style>
        @charset "UTF-8";@import url(https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,500,500i|Source+Code+Pro:300,400,500|Source+Sans+Pro:300,300i,400,400i,600,600i|Source+Serif+Pro&subset=latin-ext);.hljs{display:block;background:#fff;padding:.5em;color:#333;overflow-x:auto}.hljs-comment,.hljs-meta{color:#969896}.hljs-emphasis,.hljs-quote,.hljs-string,.hljs-strong,.hljs-template-variable,.hljs-variable{color:#df5000}.hljs-keyword,.hljs-selector-tag,.hljs-type{color:#a71d5d}.hljs-attribute,.hljs-bullet,.hljs-literal,.hljs-number,.hljs-symbol{color:#0086b3}.hljs-built_in,.hljs-builtin-name{color:#005cc5}.hljs-name,.hljs-section{color:#63a35c}.hljs-tag{color:#333}.hljs-attr,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-id,.hljs-selector-pseudo,.hljs-title{color:#795da3}.hljs-addition{color:#55a532;background-color:#eaffea}.hljs-deletion{color:#bd2c00;background-color:#ffecec}.hljs-link{text-decoration:underline}.markdown-body{font-size:16px;line-height:1.5;word-wrap:break-word}.markdown-body:after,.markdown-body:before{display:table;content:""}.markdown-body:after{clear:both}.markdown-body>:first-child{margin-top:0!important}.markdown-body>:last-child{margin-bottom:0!important}.markdown-body a:not([href]){color:inherit;text-decoration:none}.markdown-body .absent{color:#c00}.markdown-body .anchor{float:left;padding-right:4px;margin-left:-20px;line-height:1}.markdown-body .anchor:focus{outline:none}.markdown-body blockquote,.markdown-body dl,.markdown-body ol,.markdown-body p,.markdown-body pre,.markdown-body table,.markdown-body ul{margin-top:0;margin-bottom:16px}.markdown-body hr{height:.25em;padding:0;margin:24px 0;background-color:#e7e7e7;border:0}.markdown-body blockquote{font-size:16px;padding:0 1em;color:#777;border-left:.25em solid #ddd}.markdown-body blockquote>:first-child{margin-top:0}.markdown-body blockquote>:last-child{margin-bottom:0}.markdown-body kbd,.popover kbd{display:inline-block;padding:3px 5px;font-size:11px;line-height:10px;color:#555;vertical-align:middle;background-color:#fcfcfc;border:1px solid #ccc;border-bottom-color:#bbb;border-radius:3px;box-shadow:inset 0 -1px 0 #bbb}.markdown-body .loweralpha{list-style-type:lower-alpha}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin-top:24px;margin-bottom:16px;font-weight:600;line-height:1.25}.markdown-body h1 .octicon-link,.markdown-body h2 .octicon-link,.markdown-body h3 .octicon-link,.markdown-body h4 .octicon-link,.markdown-body h5 .octicon-link,.markdown-body h6 .octicon-link{color:#000;vertical-align:middle;visibility:hidden}.markdown-body h1:hover .anchor,.markdown-body h2:hover .anchor,.markdown-body h3:hover .anchor,.markdown-body h4:hover .anchor,.markdown-body h5:hover .anchor,.markdown-body h6:hover .anchor{text-decoration:none}.markdown-body h1:hover .anchor .octicon-link,.markdown-body h2:hover .anchor .octicon-link,.markdown-body h3:hover .anchor .octicon-link,.markdown-body h4:hover .anchor .octicon-link,.markdown-body h5:hover .anchor .octicon-link,.markdown-body h6:hover .anchor .octicon-link{visibility:visible}.markdown-body h1 code,.markdown-body h1 tt,.markdown-body h2 code,.markdown-body h2 tt,.markdown-body h3 code,.markdown-body h3 tt,.markdown-body h4 code,.markdown-body h4 tt,.markdown-body h5 code,.markdown-body h5 tt,.markdown-body h6 code,.markdown-body h6 tt{font-size:inherit}.markdown-body h1{font-size:2em}.markdown-body h1,.markdown-body h2{padding-bottom:.3em;border-bottom:1px solid #eee}.markdown-body h2{font-size:1.5em}.markdown-body h3{font-size:1.25em}.markdown-body h4{font-size:1em}.markdown-body h5{font-size:.875em}.markdown-body h6{font-size:.85em;color:#777}.markdown-body ol,.markdown-body ul{padding-left:2em}.markdown-body ol.no-list,.markdown-body ul.no-list{padding:0;list-style-type:none}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:0;margin-bottom:0}.markdown-body li>p{margin-top:16px}.markdown-body li+li{padding-top:.25em}.markdown-body dl{padding:0}.markdown-body dl dt{padding:0;margin-top:16px;font-size:1em;font-style:italic;font-weight:700}.markdown-body dl dd{padding:0 16px;margin-bottom:16px}.markdown-body table{display:block;width:100%;overflow:auto;word-break:normal;word-break:keep-all}.markdown-body table th{font-weight:700}.markdown-body table td,.markdown-body table th{padding:6px 13px;border:1px solid #ddd}.markdown-body table tr{background-color:#fff;border-top:1px solid #ccc}.markdown-body table tr:nth-child(2n){background-color:#f8f8f8}.markdown-body img{max-width:100%;box-sizing:content-box;background-color:#fff}.markdown-body img[align=right]{padding-left:20px}.markdown-body img[align=left]{padding-right:20px}.markdown-body .emoji{max-width:none;vertical-align:text-top;background-color:transparent}.markdown-body span.frame{display:block;overflow:hidden}.markdown-body span.frame>span{display:block;float:left;width:auto;padding:7px;margin:13px 0 0;overflow:hidden;border:1px solid #ddd}.markdown-body span.frame span img{display:block;float:left}.markdown-body span.frame span span{display:block;padding:5px 0 0;clear:both;color:#333}.markdown-body span.align-center{display:block;overflow:hidden;clear:both}.markdown-body span.align-center>span{display:block;margin:13px auto 0;overflow:hidden;text-align:center}.markdown-body span.align-center span img{margin:0 auto;text-align:center}.markdown-body span.align-right{display:block;overflow:hidden;clear:both}.markdown-body span.align-right>span{display:block;margin:13px 0 0;overflow:hidden;text-align:right}.markdown-body span.align-right span img{margin:0;text-align:right}.markdown-body span.float-left{display:block;float:left;margin-right:13px;overflow:hidden}.markdown-body span.float-left span{margin:13px 0 0}.markdown-body span.float-right{display:block;float:right;margin-left:13px;overflow:hidden}.markdown-body span.float-right>span{display:block;margin:13px auto 0;overflow:hidden;text-align:right}.markdown-body code,.markdown-body tt{padding:0;padding-top:.2em;padding-bottom:.2em;margin:0;font-size:85%;background-color:rgba(0,0,0,.04);border-radius:3px}.markdown-body code:after,.markdown-body code:before,.markdown-body tt:after,.markdown-body tt:before{letter-spacing:-.2em;content:"\00a0"}.markdown-body code br,.markdown-body tt br{display:none}.markdown-body del code{text-decoration:inherit}.markdown-body pre{word-wrap:normal}.markdown-body pre>code{padding:0;margin:0;font-size:100%;word-break:normal;white-space:pre;background:transparent;border:0}.markdown-body .highlight{margin-bottom:16px}.markdown-body .highlight pre{margin-bottom:0;word-break:normal}.markdown-body .highlight pre,.markdown-body pre{padding:16px;overflow:auto;font-size:85%;line-height:1.45;background-color:#f7f7f7;border-radius:3px}.markdown-body pre code,.markdown-body pre tt{display:inline;max-width:auto;padding:0;margin:0;overflow:visible;line-height:inherit;word-wrap:normal;background-color:transparent;border:0}.markdown-body pre code:after,.markdown-body pre code:before,.markdown-body pre tt:after,.markdown-body pre tt:before{content:normal}.markdown-body .csv-data td,.markdown-body .csv-data th{padding:5px;overflow:hidden;font-size:12px;line-height:1;text-align:left;white-space:nowrap}.markdown-body .csv-data .blob-line-num{padding:10px 8px 9px;text-align:right;background:#fff;border:0}.markdown-body .csv-data tr{border-top:0}.markdown-body .csv-data th{font-weight:700;background:#f8f8f8;border-top:0}.news .alert .markdown-body blockquote{padding:0 0 0 40px;border:0 none}.activity-tab .news .alert .commits,.activity-tab .news .markdown-body blockquote{padding-left:0}.task-list-item{list-style-type:none}.task-list-item label{font-weight:400}.task-list-item.enabled label{cursor:pointer}.task-list-item+.task-list-item{margin-top:3px}.task-list-item-checkbox{float:left;margin:.31em 0 .2em -1.3em!important;vertical-align:middle;cursor:default!important}.markdown-body{padding-top:40px;padding-bottom:40px;max-width:758px;overflow:visible!important;position:relative}.markdown-body .emoji{vertical-align:top}.markdown-body pre{border:inherit!important}.markdown-body code{color:inherit!important}.markdown-body pre code .wrapper{display:-moz-inline-flex;display:-ms-inline-flex;display:-o-inline-flex;display:inline-flex}.markdown-body pre code .gutter{float:left;overflow:hidden;-webkit-user-select:none;user-select:none}.markdown-body pre code .gutter.linenumber{text-align:right;position:relative;display:inline-block;cursor:default;z-index:4;padding:0 8px 0 0;min-width:20px;box-sizing:content-box;color:#afafaf!important;border-right:3px solid #6ce26c!important}.markdown-body pre code .gutter.linenumber>span:before{content:attr(data-linenumber)}.markdown-body pre code .code{float:left;margin:0 0 0 16px}.markdown-body .gist .line-numbers{border-left:none;border-top:none;border-bottom:none}.markdown-body .gist .line-data{border:none}.markdown-body .gist table{border-spacing:0;border-collapse:inherit!important}.markdown-body code[data-gist-id]{background:none;padding:0}.markdown-body code[data-gist-id]:after,.markdown-body code[data-gist-id]:before{content:""}.markdown-body code[data-gist-id] .blob-num{border:unset}.markdown-body code[data-gist-id] table{overflow:unset;margin-bottom:unset}.markdown-body code[data-gist-id] table tr{background:unset}.markdown-body[dir=rtl] pre{direction:ltr}.markdown-body[dir=rtl] code{direction:ltr;unicode-bidi:embed}.markdown-body .alert>p{margin-bottom:0}.markdown-body pre.abc,.markdown-body pre.flow-chart,.markdown-body pre.graphviz,.markdown-body pre.mermaid,.markdown-body pre.sequence-diagram,.markdown-body pre.vega{text-align:center;background-color:inherit;border-radius:0;white-space:inherit;overflow:visible}.markdown-body pre.abc>code,.markdown-body pre.flow-chart>code,.markdown-body pre.graphviz>code,.markdown-body pre.mermaid>code,.markdown-body pre.sequence-diagram>code,.markdown-body pre.vega>code{text-align:left}.markdown-body pre.abc>svg,.markdown-body pre.flow-chart>svg,.markdown-body pre.graphviz>svg,.markdown-body pre.mermaid>svg,.markdown-body pre.sequence-diagram>svg,.markdown-body pre.vega>svg{max-width:100%;height:100%}.markdown-body pre>code.wrap{white-space:pre-wrap;white-space:-moz-pre-wrap;white-space:-pre-wrap;white-space:-o-pre-wrap;word-wrap:break-word}.markdown-body .alert>p,.markdown-body .alert>ul{margin-bottom:0}.markdown-body summary{display:list-item}.markdown-body summary:focus{outline:none}.markdown-body details summary{cursor:pointer}.markdown-body details:not([open])>:not(summary){display:none}.markdown-body figure{margin:1em 40px}.markdown-body .mark,.markdown-body mark{background-color:#fff1a7}.vimeo,.youtube{cursor:pointer;display:table;text-align:center;background-position:50%;background-repeat:no-repeat;background-size:contain;background-color:#000;overflow:hidden}.vimeo,.youtube{position:relative;width:100%}.youtube{padding-bottom:56.25%}.vimeo img{width:100%;object-fit:contain;z-index:0}.youtube img{object-fit:cover;z-index:0}.vimeo iframe,.youtube iframe,.youtube img{width:100%;height:100%;position:absolute;top:0;left:0}.vimeo iframe,.youtube iframe{vertical-align:middle;z-index:1}.vimeo .icon,.youtube .icon{position:absolute;height:auto;width:auto;top:50%;left:50%;transform:translate(-50%,-50%);color:#fff;opacity:.3;transition:opacity .2s;z-index:0}.vimeo:hover .icon,.youtube:hover .icon{opacity:.6;transition:opacity .2s}.slideshare .inner,.speakerdeck .inner{position:relative;width:100%}.slideshare .inner iframe,.speakerdeck .inner iframe{position:absolute;top:0;bottom:0;left:0;right:0;width:100%;height:100%}.MJX_Assistive_MathML{display:none}.ui-infobar{position:relative;z-index:2;max-width:760px;margin:25px auto -25px;color:#777}.toc .invisable-node{list-style-type:none}.ui-toc{position:fixed;bottom:20px;z-index:998}.ui-toc.both-mode{margin-left:8px}.ui-toc.both-mode .ui-toc-label{height:40px;padding:10px 4px;border-top-left-radius:0;border-bottom-left-radius:0}.ui-toc-label{background-color:#e6e6e6;border:none;color:#868686;transition:opacity .2s}.ui-toc .open .ui-toc-label{opacity:1;color:#fff;transition:opacity .2s}.ui-toc-label:focus{opacity:.3;background-color:#ccc;color:#000}.ui-toc-label:hover{opacity:1;background-color:#ccc;transition:opacity .2s}.ui-toc-dropdown{margin-top:20px;margin-bottom:20px;padding-left:10px;padding-right:10px;max-width:45vw;width:25vw;max-height:70vh;overflow:auto;text-align:inherit}.ui-toc-dropdown>.toc{max-height:calc(70vh - 100px);overflow:auto}.ui-toc-dropdown[dir=rtl] .nav{padding-right:0;letter-spacing:.0029em}.ui-toc-dropdown a{overflow:hidden;text-overflow:ellipsis;white-space:pre}.ui-toc-dropdown .nav>li>a{display:block;padding:4px 20px;font-size:13px;font-weight:500;color:#767676}.ui-toc-dropdown .nav>li:first-child:last-child > ul,.ui-toc-dropdown .toc.expand ul{display:block}.ui-toc-dropdown .nav>li>a:focus,.ui-toc-dropdown .nav>li>a:hover{padding-left:19px;color:#000;text-decoration:none;background-color:transparent;border-left:1px solid #000}.ui-toc-dropdown[dir=rtl] .nav>li>a:focus,.ui-toc-dropdown[dir=rtl] .nav>li>a:hover{padding-right:19px;border-left:none;border-right:1px solid #000}.ui-toc-dropdown .nav>.active:focus>a,.ui-toc-dropdown .nav>.active:hover>a,.ui-toc-dropdown .nav>.active>a{padding-left:18px;font-weight:700;color:#000;background-color:transparent;border-left:2px solid #000}.ui-toc-dropdown[dir=rtl] .nav>.active:focus>a,.ui-toc-dropdown[dir=rtl] .nav>.active:hover>a,.ui-toc-dropdown[dir=rtl] .nav>.active>a{padding-right:18px;border-left:none;border-right:2px solid #000}.ui-toc-dropdown .nav .nav{display:none;padding-bottom:10px}.ui-toc-dropdown .nav>.active>ul{display:block}.ui-toc-dropdown .nav .nav>li>a{padding-top:1px;padding-bottom:1px;padding-left:30px;font-size:12px;font-weight:400}.ui-toc-dropdown[dir=rtl] .nav .nav>li>a{padding-right:30px}.ui-toc-dropdown .nav .nav>li>ul>li>a{padding-top:1px;padding-bottom:1px;padding-left:40px;font-size:12px;font-weight:400}.ui-toc-dropdown[dir=rtl] .nav .nav>li>ul>li>a{padding-right:40px}.ui-toc-dropdown .nav .nav>li>a:focus,.ui-toc-dropdown .nav .nav>li>a:hover{padding-left:29px}.ui-toc-dropdown[dir=rtl] .nav .nav>li>a:focus,.ui-toc-dropdown[dir=rtl] .nav .nav>li>a:hover{padding-right:29px}.ui-toc-dropdown .nav .nav>li>ul>li>a:focus,.ui-toc-dropdown .nav .nav>li>ul>li>a:hover{padding-left:39px}.ui-toc-dropdown[dir=rtl] .nav .nav>li>ul>li>a:focus,.ui-toc-dropdown[dir=rtl] .nav .nav>li>ul>li>a:hover{padding-right:39px}.ui-toc-dropdown .nav .nav>.active:focus>a,.ui-toc-dropdown .nav .nav>.active:hover>a,.ui-toc-dropdown .nav .nav>.active>a{padding-left:28px;font-weight:500}.ui-toc-dropdown[dir=rtl] .nav .nav>.active:focus>a,.ui-toc-dropdown[dir=rtl] .nav .nav>.active:hover>a,.ui-toc-dropdown[dir=rtl] .nav .nav>.active>a{padding-right:28px}.ui-toc-dropdown .nav .nav>.active>.nav>.active:focus>a,.ui-toc-dropdown .nav .nav>.active>.nav>.active:hover>a,.ui-toc-dropdown .nav .nav>.active>.nav>.active>a{padding-left:38px;font-weight:500}.ui-toc-dropdown[dir=rtl] .nav .nav>.active>.nav>.active:focus>a,.ui-toc-dropdown[dir=rtl] .nav .nav>.active>.nav>.active:hover>a,.ui-toc-dropdown[dir=rtl] .nav .nav>.active>.nav>.active>a{padding-right:38px}.markdown-body{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica Neue,Helvetica,Roboto,Arial,sans-serif}html[lang^=ja] .markdown-body{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica Neue,Helvetica,Roboto,Arial,Hiragino Kaku Gothic Pro,ヒラギノ角ゴ Pro W3,Osaka,Meiryo,メイリオ,MS Gothic,ＭＳ\ ゴシック,sans-serif}html[lang=zh-tw] .markdown-body{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica Neue,Helvetica,Roboto,Arial,PingFang TC,Microsoft JhengHei,微軟正黑,sans-serif}html[lang=zh-cn] .markdown-body{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica Neue,Helvetica,Roboto,Arial,PingFang SC,Microsoft YaHei,微软雅黑,sans-serif}html .markdown-body[lang^=ja]{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica Neue,Helvetica,Roboto,Arial,Hiragino Kaku Gothic Pro,ヒラギノ角ゴ Pro W3,Osaka,Meiryo,メイリオ,MS Gothic,ＭＳ\ ゴシック,sans-serif}html .markdown-body[lang=zh-tw]{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica Neue,Helvetica,Roboto,Arial,PingFang TC,Microsoft JhengHei,微軟正黑,sans-serif}html .markdown-body[lang=zh-cn]{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica Neue,Helvetica,Roboto,Arial,PingFang SC,Microsoft YaHei,微软雅黑,sans-serif}html[lang^=ja] .ui-toc-dropdown{font-family:Source Sans Pro,Helvetica,Arial,Meiryo UI,MS PGothic,ＭＳ\ Ｐゴシック,sans-serif}html[lang=zh-tw] .ui-toc-dropdown{font-family:Source Sans Pro,Helvetica,Arial,Microsoft JhengHei UI,微軟正黑UI,sans-serif}html[lang=zh-cn] .ui-toc-dropdown{font-family:Source Sans Pro,Helvetica,Arial,Microsoft YaHei UI,微软雅黑UI,sans-serif}html .ui-toc-dropdown[lang^=ja]{font-family:Source Sans Pro,Helvetica,Arial,Meiryo UI,MS PGothic,ＭＳ\ Ｐゴシック,sans-serif}html .ui-toc-dropdown[lang=zh-tw]{font-family:Source Sans Pro,Helvetica,Arial,Microsoft JhengHei UI,微軟正黑UI,sans-serif}html .ui-toc-dropdown[lang=zh-cn]{font-family:Source Sans Pro,Helvetica,Arial,Microsoft YaHei UI,微软雅黑UI,sans-serif}.ui-affix-toc{position:fixed;top:0;max-width:15vw;max-height:70vh;overflow:auto}.back-to-top,.expand-toggle,.go-to-bottom{display:block;padding:4px 10px;margin-top:10px;margin-left:10px;font-size:12px;font-weight:500;color:#999}.back-to-top:focus,.back-to-top:hover,.expand-toggle:focus,.expand-toggle:hover,.go-to-bottom:focus,.go-to-bottom:hover{color:#563d7c;text-decoration:none}.back-to-top,.go-to-bottom{margin-top:0}.ui-user-icon{width:20px;height:20px;display:block;border-radius:3px;margin-top:2px;margin-bottom:2px;margin-right:5px;background-position:50%;background-repeat:no-repeat;background-size:cover}.ui-user-icon.small{width:18px;height:18px;display:inline-block;vertical-align:middle;margin:0 0 .2em}.ui-infobar>small>span{line-height:22px}.ui-infobar>small .dropdown{display:inline-block}.ui-infobar>small .dropdown a:focus,.ui-infobar>small .dropdown a:hover{text-decoration:none}.ui-published-note{color:#337ab7}.ui-published-note .fa{font-size:20px;vertical-align:top}.unselectable{-webkit-user-select:none;-o-user-select:none;user-select:none}.selectable{-webkit-user-select:text;-o-user-select:text;user-select:text}@media print{blockquote,div,img,pre,table{page-break-inside:avoid!important}a[href]:after{font-size:12px!important}}.markdown-body.slides{position:relative;z-index:1;color:#222}.markdown-body.slides:before{content:"";display:block;position:absolute;top:0;left:0;right:0;bottom:0;z-index:-1;background-color:currentColor;box-shadow:0 0 0 50vw}.markdown-body.slides section[data-markdown]{position:relative;margin-bottom:1.5em;background-color:#fff;text-align:center}.markdown-body.slides section[data-markdown] code{text-align:left}.markdown-body.slides section[data-markdown]:before{content:"";display:block;padding-bottom:56.23%}.markdown-body.slides section[data-markdown]>div:first-child{position:absolute;top:50%;left:1em;right:1em;transform:translateY(-50%);max-height:100%;overflow:hidden}.markdown-body.slides section[data-markdown]>ul{display:inline-block}.markdown-body.slides>section>section+section:after{content:"";position:absolute;top:-1.5em;right:1em;height:1.5em;border:3px solid #777}.site-ui-font{font-family:Source Sans Pro,Helvetica,Arial,sans-serif}html[lang^=ja] .site-ui-font{font-family:Source Sans Pro,Helvetica,Arial,Hiragino Kaku Gothic Pro,ヒラギノ角ゴ Pro W3,Osaka,Meiryo,メイリオ,MS Gothic,ＭＳ\ ゴシック,sans-serif}html[lang=zh-tw] .site-ui-font{font-family:Source Sans Pro,Helvetica,Arial,PingFang TC,Microsoft JhengHei,微軟正黑,sans-serif}html[lang=zh-cn] .site-ui-font{font-family:Source Sans Pro,Helvetica,Arial,PingFang SC,Microsoft YaHei,微软雅黑,sans-serif}body{font-smoothing:subpixel-antialiased!important;-webkit-font-smoothing:subpixel-antialiased!important;-moz-osx-font-smoothing:auto!important;text-shadow:0 0 1em transparent,1px 1px 1.2px rgba(0,0,0,.004);-webkit-overflow-scrolling:touch;letter-spacing:.025em}.focus,:focus{outline:none!important}::-moz-focus-inner{border:0!important}body{font-family:Source Sans Pro,Helvetica,Arial,sans-serif}html[lang^=ja] body{font-family:Source Sans Pro,Helvetica,Arial,Hiragino Kaku Gothic Pro,ヒラギノ角ゴ Pro W3,Osaka,Meiryo,メイリオ,MS Gothic,ＭＳ\ ゴシック,sans-serif}html[lang=zh-tw] body{font-family:Source Sans Pro,Helvetica,Arial,PingFang TC,Microsoft JhengHei,微軟正黑,sans-serif}html[lang=zh-cn] body{font-family:Source Sans Pro,Helvetica,Arial,PingFang SC,Microsoft YaHei,微软雅黑,sans-serif}abbr[title]{border-bottom:none;text-decoration:underline;-webkit-text-decoration:underline dotted;text-decoration:underline dotted}abbr[data-original-title],abbr[title]{cursor:help}body.modal-open{overflow-y:auto;padding-right:0!important}
    </style>
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    	<script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.min.js" integrity="sha256-3Jy/GbSLrg0o9y5Z5n1uw0qxZECH7C6OQpVBgNFYa0g=" crossorigin="anonymous"></script>
    	<script src="https://cdnjs.cloudflare.com/ajax/libs/respond.js/1.4.2/respond.min.js" integrity="sha256-g6iAfvZp+nDQ2TdTR/VVKJf3bGro4ub5fvWSWVRi2NE=" crossorigin="anonymous"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/es5-shim/4.5.9/es5-shim.min.js" integrity="sha256-8E4Is26QH0bD52WoQpcB+R/tcWQtpzlCojrybUd7Mxo=" crossorigin="anonymous"></script>
    <![endif]-->
</head>

<body>
    <div id="doc" class="markdown-body container-fluid comment-inner comment-enabled" data-hard-breaks="true"><h1 id="ReGenesis-Plan" data-id="ReGenesis-Plan"><a class="anchor hidden-xs" href="#ReGenesis-Plan" title="ReGenesis-Plan"><span class="octicon octicon-link"></span></a><span>ReGenesis Plan</span></h1><h2 id="Summary-of-ReGenesis" data-id="Summary-of-ReGenesis"><a class="anchor hidden-xs" href="#Summary-of-ReGenesis" title="Summary-of-ReGenesis"><span class="octicon octicon-link"></span></a><span>Summary of ReGenesis</span></h2><p><span>Before we get into the planning of how ReGenesis can be implemented and rolled out, here is a quick summary of what it is. Although the idea is not new, it has been proposed in the current form here: </span><a href="https://ethresear.ch/t/regenesis-resetting-ethereum-to-reduce-the-burden-of-large-blockchain-and-state/7582" target="_blank" rel="noopener"><span>https://ethresear.ch/t/regenesis-resetting-ethereum-to-reduce-the-burden-of-large-blockchain-and-state/7582</span></a><br>
<span>There is also an explainer post: </span><a href="https://medium.com/@mandrigin/regenesis-explained-97540f457807" target="_blank" rel="noopener"><span>https://medium.com/@mandrigin/regenesis-explained-97540f457807</span></a></p><p><span>ReGenesis logically splits the Ethereum state into two disjoint parts - active state and inactive state. There are ReGenesis “events” occuring regularly, at pre-scheduled times, but not very frequently, for example, every 1 million blocks, which is roughly 6 months. At a ReGenesis event, the active state is reset to just the state root hash, and the entire state is considered inactive. After that, until the next ReGenesis event, new state items get added to the active state, existing state items in the inactive state are moved from inactive into the active state (activated), and there, in the active state, they may change their values.</span><br>
<span>The only two ways to activate a piece of state, or add new data into the active state are transaction witness and block witness.</span></p><h3 id="Transaction-witness" data-id="Transaction-witness"><a class="anchor hidden-xs" href="#Transaction-witness" title="Transaction-witness"><span class="octicon octicon-link"></span></a><span>Transaction witness</span></h3><p><span>Transactions get a new attribute, witness, which is a string of bytes encoding a collection of merkle multiproofs. Any part of the these multiproofs that are still valid against the active state, are added to the active state before transaction is executed. (TODO: Explain more how and why only part of these multiproofs will be valid most of the time, and how to find the valid parts).</span></p><h3 id="Block-witness" data-id="Block-witness"><a class="anchor hidden-xs" href="#Block-witness" title="Block-witness"><span class="octicon octicon-link"></span></a><span>Block witness</span></h3><p><span>Blocks also get a new attribute, witness, which has the same encoding and capabilities as transaction witnesses, except that the valid parts of the block witness are added to the active state before executing any transaction in the block. One reason block witnesses are required is activation of miner’s coinbase address in the state. Another reason is ensuring a more gradual transition to the ReGenesis. For example, miner may choose to make an otherwise failing transaction succeed by identifying pieces of state missing from the transaction’s witnesses, and adding these pieces into the block witness (transaction repair).</span></p><h3 id="Gas-charge-for-witnesses" data-id="Gas-charge-for-witnesses"><a class="anchor hidden-xs" href="#Gas-charge-for-witnesses" title="Gas-charge-for-witnesses"><span class="octicon octicon-link"></span></a><span>Gas charge for witnesses</span></h3><p><span>Depending on where we are in the process of introducing ReGenesis, the extra bytes in the transaction witnesses and block witnesses are either free of gas charge (initial stages), and later charged from transaction sender (for transaction witness ony).</span></p><h3 id="Change-in-execution-semantics" data-id="Change-in-execution-semantics"><a class="anchor hidden-xs" href="#Change-in-execution-semantics" title="Change-in-execution-semantics"><span class="octicon octicon-link"></span></a><span>Change in execution semantics</span></h3><p><span>The semantics of executing transactions changes slightly. Now whenever transaction attempts to read a part of state, but that part of state is inactive, transaction reverts and gas spent up to that point is consumed.</span><br>
<span>Another change in the semantics is that if at the end of the block’s execution, the miner’s coinbase is not in the active state, the mining rewards are not given (reward and transaction fees are essentially burnt).</span></p><h3 id="Change-of-Chain-ID" data-id="Change-of-Chain-ID"><a class="anchor hidden-xs" href="#Change-of-Chain-ID" title="Change-of-Chain-ID"><span class="octicon octicon-link"></span></a><span>Change of Chain ID</span></h3><p><span>After each ReGenesis event, the chainID changes to a new value. This ensures that any transactions that were created before the ReGenesis event and are still “in flight”, will not simply fail on chain (because they will most probably have insufficient witness). Instead, transactions for the new ReGenesis “epoch” need to be explicitely recreated. This would help transaction creators have more robust processes for the ReGenesis events.</span></p><h2 id="Percieved-benefits" data-id="Percieved-benefits"><a class="anchor hidden-xs" href="#Percieved-benefits" title="Percieved-benefits"><span class="octicon octicon-link"></span></a><span>Percieved benefits</span></h2><p><span>The hope is that by re-setting the active state regularly, and requiring that only the active state is accessible by transactions, we can keep the active state small enough so that Ethereum nodes can store it in RAM, or at least on very low-latency devices. This, in turn, will ensure that the actual cost of state accessing operations (</span><code>SLOAD</code><span>, </span><code>BALANCE</code><span>, </span><code>EXTCODEHASH</code><span>, etc.) does not keep increasing. That means we can safely increase block gas limit to much higher values that we have today.</span></p><p><span>ReGenesis makes it more explicit at which point any node can sync “from scratch”. This means that it will become a norm to have an implementation that does not implement all the historical rules for all Ethereum forks. Instead, only behaviour since the last ReGenesis is a must, and all historical rules can be moved into specialised historical tracing tools.</span></p><h2 id="Extra-costs" data-id="Extra-costs"><a class="anchor hidden-xs" href="#Extra-costs" title="Extra-costs"><span class="octicon octicon-link"></span></a><span>Extra costs</span></h2><p><span>Transactions will become larger because they will need to include witnesses. We expect this extra weight to be the highest right after a ReGenesis event, when transactions will need to activate the parts of the state they are using. However, active state can saturate to some degree, and more and more transactions will not need to include any witnesses, or very small witnesses.</span></p><h2 id="Downsides-for-some-stakeholders" data-id="Downsides-for-some-stakeholders"><a class="anchor hidden-xs" href="#Downsides-for-some-stakeholders" title="Downsides-for-some-stakeholders"><span class="octicon octicon-link"></span></a><span>Downsides for some stakeholders</span></h2><p><span>Altough the burden on the core Ethereum infrastructure is likely to decrease, the burden on transaction-sending intfrastructure will increase. In order to compose a successful transaction, one would potentially need access not just to active state, but also to inactive state. In order to assist with this task, we would like network participants to create state snapshot in suitable formats and distribute them over BitTorrent (and perhaps other networks). In the same way, sets of historical blocks and receipts will be distributed for the purpose of retracing past transactions.</span></p><h2 id="Discussion-of-benefits-vs-downsides" data-id="Discussion-of-benefits-vs-downsides"><a class="anchor hidden-xs" href="#Discussion-of-benefits-vs-downsides" title="Discussion-of-benefits-vs-downsides"><span class="octicon octicon-link"></span></a><span>Discussion of benefits vs downsides</span></h2><p><span>ReGenesis changes the status quo in that more aggressive optimisations will need to be done on the boundaries of the Ethereum network (where transactions are being created and injected), rather than in the core (critical infrastructure, “center” of the network). It may be more fair because boundaries are usually the places where the value is captured. Also, there is more diversity and decentralisation on the boundaries (there are more users than critical node operators). Failure to optimise on the boundaries does not represent systemic risk (i.e. it does not bring down the entire system). In the status quo, failure to optimise (in the core of the network) does represent systemic risk, and can potentially bring the entire system down.</span></p><h2 id="Soft-fork-and-hard-fork" data-id="Soft-fork-and-hard-fork"><a class="anchor hidden-xs" href="#Soft-fork-and-hard-fork" title="Soft-fork-and-hard-fork"><span class="octicon octicon-link"></span></a><span>Soft fork and hard fork</span></h2><p><span>Broadly, the proposed transition from where we are to ReGeneis is via a soft-fork, followed by a hard fork. After the soft-fork, most of the benefits for the core infrastructure can be made tangible, at the cost of running some amount of altruistic (or sponsored) nodes. Following hard-fork is required to bring about the extra costs and downsides, therefore removing the reliance on the altruistic or sponsored nodes.</span></p><p><span>Soft forks can be seen as extra restrictions on the validity of transactions and blocks. Some blocks and transactions that are valid before a soft fork, are treated as invalid under the soft fork. Soft forks have been used in Bitcoin (most famously to activate SegWit), but were deemed to be unworkable on Ethereum after an attempt to do one to restrict the transactions to the DAO in 2016: </span><a href="https://hackingdistributed.com/2016/07/05/eth-is-more-resilient-to-censorship/" target="_blank" rel="noopener"><span>https://hackingdistributed.com/2016/07/05/eth-is-more-resilient-to-censorship/</span></a><br>
<span>The main reason soft forks are deemed to be unworkable on Ethereum is that transactions can be well formed, and funded, and thus propagating through the transaction pool, but then hit the miners, where they would need to be fully executed only to find out that they are invalid.</span><br>
<span>In order to overcome this challenge, the plan is to gradually create two auxillary networks:</span></p><ol>
<li><span>Transaction pool with ReGenesis witnesses</span></li>
<li><span>Pre-consensus network</span></li>
</ol><h3 id="Transaction-pool-with-ReGenesis-witnesses" data-id="Transaction-pool-with-ReGenesis-witnesses"><a class="anchor hidden-xs" href="#Transaction-pool-with-ReGenesis-witnesses" title="Transaction-pool-with-ReGenesis-witnesses"><span class="octicon octicon-link"></span></a><span>Transaction pool with ReGenesis witnesses</span></h3><p><span>This transaction pool can be created as a devp2p subprotocol, or as a completely new network. It will serve the same purpose as the the transaction pool today, but with some extra restrictions and extra capabilities. Any transaction message relayed on this network will need to include witness information. This witness needs to have a root at any state root between the latest ReGenesis event and the latest current block. This witness needs to be sufficient to verify sender’s balance, nonce, and also fully execute the transaction without having any access to the Ethereum state. If there is no witness, or it does not satisfy the requirements, the transaction is deemed invalid and gets removed from the pool. There could be some extra temporary penalty logic to prevent the same account regularly creating invalid transactions and waste tx pool network’s resources. At any point in time, the witness of a transaction can be updated by anyone, to include more recent information and rely on a more recent state root (but not the other direction, updates to more distant root are not permitted), as long the update does not remove previously included items. This update mechanism is used to knock out the transactions that have invalid nonce because the same sender had some other transactions included into the blocks, or insufficient funds because they have been spent by the intervining transactions.</span><br>
<span>There are few benefits of this network:</span></p><ol>
<li><span>Most of the verifying and relaying activities can be performed without having Ethereum state, which simplifies development of more diverse independent implementations (of standalone tx pool nodes), and faster innovations.</span></li>
<li><span>Since transactions are getting executed by the pool nodes (albeight perhaps on an older version of the state), a lot of simple DOS attacks can be absorbed and filtered out by this network - this can be a good incentive for miners to eventually source their transactions from it.</span></li>
</ol><p><span>The transaction pool network can be bootstrapped by creating network bridge nodes. These bridge nodes connect to both </span><code>eth</code><span> network and tx pool network, and relay transaction from one to another. If the idea proves successful, transaction injection will gradually move from </span><code>eth</code><span> network, and wallets, exchanges, and dapp backends will start injecting transactions directly into the tx pool network.</span></p><h3 id="Pre-consensus-network" data-id="Pre-consensus-network"><a class="anchor hidden-xs" href="#Pre-consensus-network" title="Pre-consensus-network"><span class="octicon octicon-link"></span></a><span>Pre-consensus network</span></h3><p><span>It is the main mechanism for the enforcement of the soft fork. Here, Ethereum nodes will run a variant of Avalanche protocol to quickly agree on the composition of the blocks to be mined by the miners. Blocks agreed by the pre-consensus network will not include transactions that would, under ReGenesis rules, have to be accompanied by a very large witness, so that either the sending account would not have enough funds to pay for it, or the block gas limit would not allow it. This is similar to what the transaction pool network is doing, but while transaction pool provides only coarse-grained enforcement, the pre-consensus network provides a fine-grained enforcement, because transactions are evaluated in the context of being run in a proper block. Once a block is prepared and agreed by the pre-consensus network, it is presented in a form that is useful for the miners, with most of the calculation and hashing done, so that a miner needs to simply add the coinbase and finalise the state root calculation.</span><br>
<span>The reason pre-consensus network can be run more efficiently than the main network, is that it will operate in ReGenesis mode, having the active state in RAM, and therefore limiting the actual cost of state accessing operations. Nodes in the pre-consensus network will rely on the transaction pool network to append witnesses to the transactions and filter out most of the transactions that would fail due to the insufficient witness, or very large witness.</span></p><h3 id="Snapshots" data-id="Snapshots"><a class="anchor hidden-xs" href="#Snapshots" title="Snapshots"><span class="octicon octicon-link"></span></a><span>Snapshots</span></h3><p><span>In order to assist transaction injecting nodes with performing their functions, there will be a regular creation and distribution of various snapshots via BitTorrent:</span></p><ol>
<li><span>Header files. Each header file will contain headers for some standardiased range of blocks. For example, </span><code>[1;11m]</code><span>, </span><code>(11m;12m]</code><span>, </span><code>(12m;13m]</code><span>, etc.</span></li>
<li><span>Block bodies files. Same as header files but containing block bodies.</span></li>
<li><span>Receipt files. Similar to the two above.</span></li>
<li><span>State files. Each state snapshot contains the entire state at block number when ReGenesis event happened. Since such events do not happen very frequently, there will not be many files, and therefore we can ensure a very high replication factor.</span></li>
</ol><p><span>The content addresses of these files will be hard-coded in the implementation, because we can expect to make at least 1 code release during 1 ReGenesis cycle.</span></p><h2 id="Thin-blocks" data-id="Thin-blocks"><a class="anchor hidden-xs" href="#Thin-blocks" title="Thin-blocks"><span class="octicon octicon-link"></span></a><span>Thin blocks</span></h2><p><span>One of the main critiques of Stateless Ethereum project so far was the potentially large block witnesses. With ReGenesis, the expectation is that at least for some time after each ReGenesis event, the blocks will be large due to all transactions in them having to carry witnesses for the state they are accessing. In order to deal with this problem, we can introduce a concept of “thin blocks”. The idea is that instead of having every block body include the entire transaction with its witness, we will have block bodies include only the list of transaction IDs, and block witness (which is much smaller for ReGeneis, since it only need to ensure coinbase is in the active state). Transactions can be obtained via transaction pool, or if they are gone, full size blocks can be downloaded from peers on demand (but we assume that most peers who need to receive blocks fast, will be able to reconstruct them from the list of transaction IDs and block witnesses).</span></p><h2 id="Pre-consensus-and-Sybil-attacks" data-id="Pre-consensus-and-Sybil-attacks"><a class="anchor hidden-xs" href="#Pre-consensus-and-Sybil-attacks" title="Pre-consensus-and-Sybil-attacks"><span class="octicon octicon-link"></span></a><span>Pre-consensus and Sybil attacks</span></h2><p><span>We can construct the rules of pre-consensus such that:</span></p><ol>
<li><span>Fuller blocks (by amount of gas spent) are preferred to emptier blocks</span></li>
<li><span>Blocks that include transactions according to “high gas price to low gas price” rule are preferred to the blocks that exclude certain transactions (censorship)</span></li>
</ol><p><span>In order to check (2) we would need to use observations from the transaction pool network. With such rules, we can end up with the small set of candidate blocks such that we are ambivalent about which block should win in the pre-consensus, because the rules above ensure that they are all good. However, an adversary performing a Sybil attack, can make pre-consensus stall, and never make any decision. To overcome this issue, the “Snowglobe” proposal for Bitcoin Cash suggested using “coin age” to resist Sybil attacks: </span><a href="https://github.com/tyler-smith/snowglobe/blob/master/spec/snowglobe.md#sybil-resistance-via-coin-age" target="_blank" rel="noopener"><span>https://github.com/tyler-smith/snowglobe/blob/master/spec/snowglobe.md#sybil-resistance-via-coin-age</span></a></p><p><span>Coin age can be very easily observe in UTXO blockchains, but in Ethereum we might need to create a “coin age” contract to emulate that. In such contract, anyone can deposit some ETH, and register a public key that would be used for verifying handshake challenges when nodes join pre-consensus. Withdrawal can happen at any time, but it immediately invalidates the eligibility of the registered public key.</span></p><h2 id="Even-thinner-blocks-with-pre-consensus" data-id="Even-thinner-blocks-with-pre-consensus"><a class="anchor hidden-xs" href="#Even-thinner-blocks-with-pre-consensus" title="Even-thinner-blocks-with-pre-consensus"><span class="octicon octicon-link"></span></a><span>Even thinner blocks with pre-consensus</span></h2><p><span>If pre-consensus is achieved for a block, and miner followed it, and produced the pre-agreed block with its coinbase and its mining nonce, then such block can be propagated to the peers using just 60 bytes of information (20 bytes for coinbase address, 8 bytes for the mining nonce, and 32 bytes for </span><code>extraData</code><span>). This is almost as small as a block hash. Currently, go-ethereum uses this logic to propagate and announce new blocks. If it has </span><code>N</code><span> peers, it will randomly select </span><code>sqrt(N)</code><span> peers, and propagate the new block to them (with full body). For the rest of the peers, the new block is just announced (only hash of the block is sent). If the mined block followed pre-consensus, then such block can be propagated to all peers, and reach all corners of the network faster. This creates a potential incentive for miners to obey the pre-consensus.</span></p><h2 id="Rough-list-of-tasks" data-id="Rough-list-of-tasks"><a class="anchor hidden-xs" href="#Rough-list-of-tasks" title="Rough-list-of-tasks"><span class="octicon octicon-link"></span></a><span>Rough list of tasks</span></h2><p><span>So far these tasks are not arranged in a “topological” order, so it is mostly to give impression of may need to be done. This section is heavily biased to the turbo-geth and its architecture.</span></p><ul>
<li><span>Header files in BitTorrent</span></li>
<li><span>Block bodies files in BitTorrent</span></li>
<li><span>Receipt files in BitTorrent</span></li>
<li><span>State files in BitTorrent</span></li>
<li><span>Transaction injector for the new transaction pool network</span></li>
<li><span>Well-documented header download process via devp2p</span></li>
<li><span>Well-documented bodies download process via devp2p</span></li>
<li><span>Interface definitions between header download process and devp2p, between bodies download process and devp2p</span></li>
<li><span>Standalone devp2p components</span></li>
<li><span>Stage (for staged sync) for generating transaction witnesses</span></li>
<li><span>Backtest the block sizes (large transactions due to witnesses) as if ReGenesis happened in the past</span></li>
<li><span>Subprotocol for transaction pool for transaction with witnesses only</span></li>
<li><span>Bridge between </span><code>eth</code><span> and transaction pool networks</span></li>
<li><span>Specialised tx pool software to work in the stateless mode</span></li>
<li><span>DOS protection inside the new tx pool</span></li>
<li><span>Pre-consensus network based on Avalanche</span></li>
<li><span>ReGenesis powered preconsesus preparing blocks for mining</span></li>
</ul></div>
    <div class="ui-toc dropup unselectable hidden-print" style="display:none;">
        <div class="pull-right dropdown">
            <a id="tocLabel" class="ui-toc-label btn btn-default" data-toggle="dropdown" href="#" role="button" aria-haspopup="true" aria-expanded="false" title="Table of content">
                <i class="fa fa-bars"></i>
            </a>
            <ul id="ui-toc" class="ui-toc-dropdown dropdown-menu" aria-labelledby="tocLabel">
                <div class="toc"><ul class="nav">
<li class=""><a href="#ReGenesis-Plan" title="ReGenesis Plan">ReGenesis Plan</a><ul class="nav">
<li class=""><a href="#Summary-of-ReGenesis" title="Summary of ReGenesis">Summary of ReGenesis</a><ul class="nav">
<li><a href="#Transaction-witness" title="Transaction witness">Transaction witness</a></li>
<li><a href="#Block-witness" title="Block witness">Block witness</a></li>
<li><a href="#Gas-charge-for-witnesses" title="Gas charge for witnesses">Gas charge for witnesses</a></li>
<li><a href="#Change-in-execution-semantics" title="Change in execution semantics">Change in execution semantics</a></li>
<li><a href="#Change-of-Chain-ID" title="Change of Chain ID">Change of Chain ID</a></li>
</ul>
</li>
<li><a href="#Percieved-benefits" title="Percieved benefits">Percieved benefits</a></li>
<li><a href="#Extra-costs" title="Extra costs">Extra costs</a></li>
<li><a href="#Downsides-for-some-stakeholders" title="Downsides for some stakeholders">Downsides for some stakeholders</a></li>
<li><a href="#Discussion-of-benefits-vs-downsides" title="Discussion of benefits vs downsides">Discussion of benefits vs downsides</a></li>
<li><a href="#Soft-fork-and-hard-fork" title="Soft fork and hard fork">Soft fork and hard fork</a><ul class="nav">
<li><a href="#Transaction-pool-with-ReGenesis-witnesses" title="Transaction pool with ReGenesis witnesses">Transaction pool with ReGenesis witnesses</a></li>
<li><a href="#Pre-consensus-network" title="Pre-consensus network">Pre-consensus network</a></li>
<li><a href="#Snapshots" title="Snapshots">Snapshots</a></li>
</ul>
</li>
<li><a href="#Thin-blocks" title="Thin blocks">Thin blocks</a></li>
<li><a href="#Pre-consensus-and-Sybil-attacks" title="Pre-consensus and Sybil attacks">Pre-consensus and Sybil attacks</a></li>
<li class=""><a href="#Even-thinner-blocks-with-pre-consensus" title="Even thinner blocks with pre-consensus">Even thinner blocks with pre-consensus</a></li>
<li class=""><a href="#Rough-list-of-tasks" title="Rough list of tasks">Rough list of tasks</a></li>
</ul>
</li>
</ul>
</div><div class="toc-menu"><a class="expand-toggle" href="#">Expand all</a><a class="back-to-top" href="#">Back to top</a><a class="go-to-bottom" href="#">Go to bottom</a></div>
            </ul>
        </div>
    </div>
    <div id="ui-toc-affix" class="ui-affix-toc ui-toc-dropdown unselectable hidden-print" data-spy="affix" style="top:17px;display:none;" null null>
        <div class="toc"><ul class="nav">
<li class=""><a href="#ReGenesis-Plan" title="ReGenesis Plan">ReGenesis Plan</a><ul class="nav">
<li class=""><a href="#Summary-of-ReGenesis" title="Summary of ReGenesis">Summary of ReGenesis</a><ul class="nav">
<li><a href="#Transaction-witness" title="Transaction witness">Transaction witness</a></li>
<li><a href="#Block-witness" title="Block witness">Block witness</a></li>
<li><a href="#Gas-charge-for-witnesses" title="Gas charge for witnesses">Gas charge for witnesses</a></li>
<li><a href="#Change-in-execution-semantics" title="Change in execution semantics">Change in execution semantics</a></li>
<li><a href="#Change-of-Chain-ID" title="Change of Chain ID">Change of Chain ID</a></li>
</ul>
</li>
<li><a href="#Percieved-benefits" title="Percieved benefits">Percieved benefits</a></li>
<li><a href="#Extra-costs" title="Extra costs">Extra costs</a></li>
<li><a href="#Downsides-for-some-stakeholders" title="Downsides for some stakeholders">Downsides for some stakeholders</a></li>
<li><a href="#Discussion-of-benefits-vs-downsides" title="Discussion of benefits vs downsides">Discussion of benefits vs downsides</a></li>
<li><a href="#Soft-fork-and-hard-fork" title="Soft fork and hard fork">Soft fork and hard fork</a><ul class="nav">
<li><a href="#Transaction-pool-with-ReGenesis-witnesses" title="Transaction pool with ReGenesis witnesses">Transaction pool with ReGenesis witnesses</a></li>
<li><a href="#Pre-consensus-network" title="Pre-consensus network">Pre-consensus network</a></li>
<li><a href="#Snapshots" title="Snapshots">Snapshots</a></li>
</ul>
</li>
<li><a href="#Thin-blocks" title="Thin blocks">Thin blocks</a></li>
<li><a href="#Pre-consensus-and-Sybil-attacks" title="Pre-consensus and Sybil attacks">Pre-consensus and Sybil attacks</a></li>
<li class=""><a href="#Even-thinner-blocks-with-pre-consensus" title="Even thinner blocks with pre-consensus">Even thinner blocks with pre-consensus</a></li>
<li class=""><a href="#Rough-list-of-tasks" title="Rough list of tasks">Rough list of tasks</a></li>
</ul>
</li>
</ul>
</div><div class="toc-menu"><a class="expand-toggle" href="#">Expand all</a><a class="back-to-top" href="#">Back to top</a><a class="go-to-bottom" href="#">Go to bottom</a></div>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js" integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous" defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gist-embed/2.6.0/gist-embed.min.js" integrity="sha256-KyF2D6xPIJUW5sUDSs93vWyZm+1RzIpKCexxElmxl8g=" crossorigin="anonymous" defer></script>
    <script>
        var markdown = $(".markdown-body");
        //smooth all hash trigger scrolling
        function smoothHashScroll() {
            var hashElements = $("a[href^='#']").toArray();
            for (var i = 0; i < hashElements.length; i++) {
                var element = hashElements[i];
                var $element = $(element);
                var hash = element.hash;
                if (hash) {
                    $element.on('click', function (e) {
                        // store hash
                        var hash = this.hash;
                        if ($(hash).length <= 0) return;
                        // prevent default anchor click behavior
                        e.preventDefault();
                        // animate
                        $('body, html').stop(true, true).animate({
                            scrollTop: $(hash).offset().top
                        }, 100, "linear", function () {
                            // when done, add hash to url
                            // (default click behaviour)
                            window.location.hash = hash;
                        });
                    });
                }
            }
        }

        smoothHashScroll();
        var toc = $('.ui-toc');
        var tocAffix = $('.ui-affix-toc');
        var tocDropdown = $('.ui-toc-dropdown');
        //toc
        tocDropdown.click(function (e) {
            e.stopPropagation();
        });

        var enoughForAffixToc = true;

        function generateScrollspy() {
            $(document.body).scrollspy({
                target: ''
            });
            $(document.body).scrollspy('refresh');
            if (enoughForAffixToc) {
                toc.hide();
                tocAffix.show();
            } else {
                tocAffix.hide();
                toc.show();
            }
            $(document.body).scroll();
        }

        function windowResize() {
            //toc right
            var paddingRight = parseFloat(markdown.css('padding-right'));
            var right = ($(window).width() - (markdown.offset().left + markdown.outerWidth() - paddingRight));
            toc.css('right', right + 'px');
            //affix toc left
            var newbool;
            var rightMargin = (markdown.parent().outerWidth() - markdown.outerWidth()) / 2;
            //for ipad or wider device
            if (rightMargin >= 133) {
                newbool = true;
                var affixLeftMargin = (tocAffix.outerWidth() - tocAffix.width()) / 2;
                var left = markdown.offset().left + markdown.outerWidth() - affixLeftMargin;
                tocAffix.css('left', left + 'px');
            } else {
                newbool = false;
            }
            if (newbool != enoughForAffixToc) {
                enoughForAffixToc = newbool;
                generateScrollspy();
            }
        }
        $(window).resize(function () {
            windowResize();
        });
        $(document).ready(function () {
            windowResize();
            generateScrollspy();
        });

        //remove hash
        function removeHash() {
            window.location.hash = '';
        }

        var backtotop = $('.back-to-top');
        var gotobottom = $('.go-to-bottom');

        backtotop.click(function (e) {
            e.preventDefault();
            e.stopPropagation();
            if (scrollToTop)
                scrollToTop();
            removeHash();
        });
        gotobottom.click(function (e) {
            e.preventDefault();
            e.stopPropagation();
            if (scrollToBottom)
                scrollToBottom();
            removeHash();
        });

        var toggle = $('.expand-toggle');
        var tocExpand = false;

        checkExpandToggle();
        toggle.click(function (e) {
            e.preventDefault();
            e.stopPropagation();
            tocExpand = !tocExpand;
            checkExpandToggle();
        })

        function checkExpandToggle () {
            var toc = $('.ui-toc-dropdown .toc');
            var toggle = $('.expand-toggle');
            if (!tocExpand) {
                toc.removeClass('expand');
                toggle.text('Expand all');
            } else {
                toc.addClass('expand');
                toggle.text('Collapse all');
            }
        }

        function scrollToTop() {
            $('body, html').stop(true, true).animate({
                scrollTop: 0
            }, 100, "linear");
        }

        function scrollToBottom() {
            $('body, html').stop(true, true).animate({
                scrollTop: $(document.body)[0].scrollHeight
            }, 100, "linear");
        }
    </script>
</body>

</html>
