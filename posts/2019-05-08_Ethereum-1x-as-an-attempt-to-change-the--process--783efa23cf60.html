<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Ethereum 1x as an attempt to change the “process”</title>
    <style>
      * {
        font-family: Georgia, Cambria, "Times New Roman", Times, serif;
      }
      html,
      body {
        margin: 0;
        padding: 0;
      }
      h1 {
        font-size: 50px;
        margin-bottom: 17px;
        color: #333;
      }
      h2 {
        font-size: 24px;
        line-height: 1.6;
        margin: 30px 0 0 0;
        margin-bottom: 18px;
        margin-top: 33px;
        color: #333;
      }
      h3 {
        font-size: 30px;
        margin: 10px 0 20px 0;
        color: #333;
      }
      header {
        width: 640px;
        margin: auto;
      }
      section {
        width: 640px;
        margin: auto;
      }
      section p {
        margin-bottom: 27px;
        font-size: 20px;
        line-height: 1.6;
        color: #333;
      }
      section img {
        max-width: 640px;
      }
      footer {
        padding: 0 20px;
        margin: 50px 0;
        text-align: center;
        font-size: 12px;
      }
      .aspectRatioPlaceholder {
        max-width: auto !important;
        max-height: auto !important;
      }
      .aspectRatioPlaceholder-fill {
        padding-bottom: 0 !important;
      }
      header,
      section[data-field="subtitle"],
      section[data-field="description"] {
        display: none;
      }
    </style>
  </head>
  <body>
    <article class="h-entry">
      <header>
        <h1 class="p-name">
          Ethereum 1x as an attempt to change the “process”
        </h1>
      </header>
      <section data-field="subtitle" class="p-summary">
        By “process” here I mean something that produces the changes of rules in
        Ethereum (someone would say “protocol changes”, but I am going to…
      </section>
      <section data-field="body" class="e-content">
        <section
          name="5335"
          class="section section--body section--first section--last"
        >
          <div class="section-divider"><hr class="section-divider" /></div>
          <div class="section-content">
            <div class="section-inner sectionLayout--insetColumn">
              <h3
                name="c175"
                id="c175"
                class="graf graf--h3 graf--leading graf--title"
              >
                Ethereum 1x as an attempt to change the “process”
              </h3>
              <p name="d50d" id="d50d" class="graf graf--p graf-after--h3">
                By “process” here I mean something that produces the changes of
                rules in Ethereum (someone would say “protocol changes”, but I
                am going to try to avoid the word “protocol” here, because it
                would make things very ambiguous from the start). Some examples
                of changes of rules:
              </p>
              <ol class="postList">
                <li name="db20" id="db20" class="graf graf--li graf-after--p">
                  New EVM opcodes
                </li>
                <li name="1c0d" id="1c0d" class="graf graf--li graf-after--li">
                  Changes in the gas schedule (operations require more gas than
                  before, the reverse has not happened yet, but it might happen
                  in the future)
                </li>
                <li name="be71" id="be71" class="graf graf--li graf-after--li">
                  Making certain things invalid (like deploying contracts with
                  bytecode larger than 24 kB)
                </li>
                <li name="df78" id="df78" class="graf graf--li graf-after--li">
                  Changes in what certain pieces of data mean, or what certain
                  operations do.
                </li>
              </ol>
              <h3 name="7271" id="7271" class="graf graf--h3 graf-after--li">
                Disclaimer
              </h3>
              <p name="e0d3" id="e0d3" class="graf graf--p graf-after--h3">
                In the illustrations below, I wanted to explain things without
                always going down to all the details, so I most definitely
                omitted some important teams and people, and some steps in the
                process I either was not aware of, or chose not to show. Please
                let me know in responses if you think I missed something
                significant and thank you in advance. Please also feel free to
                modify this and publish your own versions of the process!
              </p>
              <h3 name="ec6e" id="ec6e" class="graf graf--h3 graf-after--p">
                <strong class="markup--strong markup--h3-strong"
                  >What I think the process has been so far</strong
                >
              </h3>
              <figure
                name="d41e"
                id="d41e"
                class="graf graf--figure graf-after--h3"
              >
                <div
                  class="aspectRatioPlaceholder is-locked"
                  style="max-width: 700px; max-height: 376px;"
                >
                  <div
                    class="aspectRatioPlaceholder-fill"
                    style="padding-bottom: 53.800000000000004%;"
                  ></div>
                  <img
                    class="graf-image"
                    data-image-id="1*jIxHYJVgjCcHXmdrC1i-oA.png"
                    data-width="1566"
                    data-height="842"
                    data-is-featured="true"
                    src="https://cdn-images-1.medium.com/max/800/1*jIxHYJVgjCcHXmdrC1i-oA.png"
                  />
                </div>
              </figure>
              <p name="89c0" id="89c0" class="graf graf--p graf-after--figure">
                People on the internet have ideas about how to change (improve
                or not) Ethereum. They write EIPs (Ethereum Improvement
                Proposals). For most ideas, this is where it ends.
              </p>
              <p name="3025" id="3025" class="graf graf--p graf-after--p">
                Some EIPs attract attention of one of the three client
                implementation teams, and get picked for prototyping and further
                evaluation. I put those three implementation teams in the
                diagram, because each of them is “special” in its own, important
                way:
              </p>
              <ol class="postList">
                <li name="6aca" id="6aca" class="graf graf--li graf-after--p">
                  Parity — second most used implementation (in terms of number
                  of number of nodes in the network), but apparently most used
                  among mining pools.
                </li>
                <li name="58a6" id="58a6" class="graf graf--li graf-after--li">
                  Geth (go-ethereum) — most used implementation (in terms of
                  number of nodes in the network).
                </li>
                <li name="ad3c" id="ad3c" class="graf graf--li graf-after--li">
                  Aleth (original C++ implementation) — the only implementation
                  currently capable of “generating” the consensus tests.
                </li>
              </ol>
              <p name="ba75" id="ba75" class="graf graf--p graf-after--li">
                The short conclusion is — if nobody in these three teams wants
                to (and has time to) prototype the change, it is unlikely to
                happen.
              </p>
              <p name="0eae" id="0eae" class="graf graf--p graf-after--p">
                The time period between Byzantium (October 2017) and
                Constantinople (February 2019) required a lot of work on the
                client implementations to make sure their performance can keep
                up with the increased transactional load and growing state. That
                might be one of the explanations why Constantinople does not
                really have any significant changes that required non-trivial
                research and/or implementation (for example, account abstraction
                and extended block hashes).
              </p>
              <figure
                name="7e24"
                id="7e24"
                class="graf graf--figure graf-after--p"
              >
                <div
                  class="aspectRatioPlaceholder is-locked"
                  style="max-width: 700px; max-height: 381px;"
                >
                  <div
                    class="aspectRatioPlaceholder-fill"
                    style="padding-bottom: 54.400000000000006%;"
                  ></div>
                  <img
                    class="graf-image"
                    data-image-id="1*m8iNNLLV9HfgQMzKrRW8kw.png"
                    data-width="1708"
                    data-height="930"
                    src="https://cdn-images-1.medium.com/max/800/1*m8iNNLLV9HfgQMzKrRW8kw.png"
                  />
                </div>
              </figure>
              <p name="1d29" id="1d29" class="graf graf--p graf-after--figure">
                Prototype implementations usually lead to the EIPs being
                refined, more correctly specified, or sometimes thrown out as
                flawed in some way. Also, prototype implementation makes it
                easier to create test vectors — description of various scenarios
                under which the change of rules is effected.
              </p>
              <p name="2e30" id="2e30" class="graf graf--p graf-after--p">
                Test vectors need to be written down in a special format,
                sometimes called “filler tests”. Here is an
                <a
                  href="https://github.com/ethereum/tests/blob/develop/src/GeneralStateTestsFiller/stCreate2/CREATE2_BoundsFiller.json"
                  data-href="https://github.com/ethereum/tests/blob/develop/src/GeneralStateTestsFiller/stCreate2/CREATE2_BoundsFiller.json"
                  class="markup--anchor markup--p-anchor"
                  rel="noopener"
                  target="_blank"
                  >example</a
                >
                (one of the CREATE2 tests).
              </p>
              <p name="77b5" id="77b5" class="graf graf--p graf-after--p">
                I said before that Aleth (C++) implementation is special because
                at this time, the tool for converting those filler tests into
                the consensus tests (this tool is called “testeth”) is tightly
                coupled with Aleth. This effectively makes implementations of
                EIPs in Aleth reference implementations. Consensus tests,
                generated in such ways, can be run against most of other
                implementations.
              </p>
              <p name="1d57" id="1d57" class="graf graf--p graf-after--p">
                Testing team is also special, because this team creates most of
                the test vectors (EIP writers usually don’t add a lot).
              </p>
              <p name="990b" id="990b" class="graf graf--p graf-after--p">
                I will not draw more pictures here, but the process does not end
                there. Client implementations use consensus tests to find bugs
                (in their implementations, in the reference implementation, and
                in the specification). Consensus tests are also used to drive
                testing in the “Hive”. There is also fuzz-testing involved. (I
                am not familiar with the setup though). Then there are also test
                nets (and that requires another entire post of its own).
              </p>
              <h3 name="dcb7" id="dcb7" class="graf graf--h3 graf-after--p">
                What the process could be in Ethereum 1x
              </h3>
              <figure
                name="8ddd"
                id="8ddd"
                class="graf graf--figure graf-after--h3"
              >
                <div
                  class="aspectRatioPlaceholder is-locked"
                  style="max-width: 700px; max-height: 379px;"
                >
                  <div
                    class="aspectRatioPlaceholder-fill"
                    style="padding-bottom: 54.2%;"
                  ></div>
                  <img
                    class="graf-image"
                    data-image-id="1*0cp7BAEr2nILfB5Y3GAWRQ.png"
                    data-width="1759"
                    data-height="953"
                    src="https://cdn-images-1.medium.com/max/800/1*0cp7BAEr2nILfB5Y3GAWRQ.png"
                  />
                </div>
              </figure>
              <p name="d052" id="d052" class="graf graf--p graf-after--figure">
                Now, instead of waiting for some developers in well-established
                implementation teams to get interested in a proposal, it is
                possible to form a working group and start working on it. Of
                course, it is still not trivial, because it requires finding
                people who want to do the work, people who want to pay for it,
                etc. But at least it hopefully gives us a nice separation of
                duties, and a more scalable process.
              </p>
              <figure
                name="c969"
                id="c969"
                class="graf graf--figure graf-after--p"
              >
                <div
                  class="aspectRatioPlaceholder is-locked"
                  style="max-width: 700px; max-height: 408px;"
                >
                  <div
                    class="aspectRatioPlaceholder-fill"
                    style="padding-bottom: 58.3%;"
                  ></div>
                  <img
                    class="graf-image"
                    data-image-id="1*GYFqEpPRxahDe0Q-gj-1RA.png"
                    data-width="1589"
                    data-height="927"
                    src="https://cdn-images-1.medium.com/max/800/1*GYFqEpPRxahDe0Q-gj-1RA.png"
                  />
                </div>
              </figure>
              <p name="6893" id="6893" class="graf graf--p graf-after--figure">
                Working group picks a client implementation that its members are
                most familiar with, and uses it to produce a reference
                implementation for the change. Out of the reference
                implementation, it then produces EIP (which is already much
                higher quality than in the current process), and test vectors.
                This is already possible today.
              </p>
              <figure
                name="7cd4"
                id="7cd4"
                class="graf graf--figure graf-after--p"
              >
                <div
                  class="aspectRatioPlaceholder is-locked"
                  style="max-width: 700px; max-height: 349px;"
                >
                  <div
                    class="aspectRatioPlaceholder-fill"
                    style="padding-bottom: 49.8%;"
                  ></div>
                  <img
                    class="graf-image"
                    data-image-id="1*7YAzxrszNXE_U4u6RShqAw.png"
                    data-width="1680"
                    data-height="837"
                    src="https://cdn-images-1.medium.com/max/800/1*7YAzxrszNXE_U4u6RShqAw.png"
                  />
                </div>
              </figure>
              <p name="db0f" id="db0f" class="graf graf--p graf-after--figure">
                Something that does not yet work today is the generation of the
                consensus tests out of a non-Aleth reference implementation. But
                we hope to develop the integration of the new tool “retesteth”
                with the most popular implementations . Initially, I thought
                about creating a working group for that, but then realised it
                might actually be quicker just to do it.
                <a
                  href="https://github.com/ledgerwatch/go-ethereum/blob/retesteth/cmd/geth/retesteth.go"
                  data-href="https://github.com/ledgerwatch/go-ethereum/blob/retesteth/cmd/geth/retesteth.go"
                  class="markup--anchor markup--p-anchor"
                  rel="noopener"
                  target="_blank"
                  >Here</a
                >
                is some of the on-going work on it (we also making fixes in
                retesteth).
              </p>
              <h3 name="e6a6" id="e6a6" class="graf graf--h3 graf-after--p">
                Find people and Funding
              </h3>
              <p name="3423" id="3423" class="graf graf--p graf-after--h3">
                How do we find people to work in the working groups? How do we
                make sure the work is funded? These questions are not trivial,
                but not impossible to answer. So far I see two main challenges
                to overcome:
              </p>
              <ol class="postList">
                <li name="65bc" id="65bc" class="graf graf--li graf-after--p">
                  The pool of people we draw from is quite limited. Perhaps this
                  is because “Core Developement” is still seen like some kind of
                  Dark Arts. The solutions I see are in better self-description
                  and education. More on this will come later (but not in this
                  post)
                </li>
                <li name="3dfb" id="3dfb" class="graf graf--li graf-after--li">
                  Going from funding a few implementation teams continuously and
                  letting them do “their stuff” to funding more specific and
                  temporary initiatives requires looking at funding through
                  different lenses. How much “due diligence” and oversight is
                  too much (in terms of overhead), who can decide whether
                  working groups actually deliver, etc. This is also solvable,
                  and also more on this will come later (not in this post).
                </li>
              </ol>
              <h3 name="c70e" id="c70e" class="graf graf--h3 graf-after--li">
                What is the process for Ethereum 2.0?
              </h3>
              <p name="9312" id="9312" class="graf graf--p graf-after--h3">
                I suspect one of the reasons for the monumental pivot that has
                occured in June 2018 from the “evolution” path (PoW-&gt;hybrid
                PoW/PoS-&gt;PoS-&gt;sharding) to the “complete rewrite” path was
                the realisation that Ethereum change process is way too slow to
                carry Casper and Sharding ahead with the necessary speed
              </p>
              <p name="6cfb" id="6cfb" class="graf graf--p graf-after--p">
                You may know that such pivots happen all the time in lots of
                systems. Usually these pivots are motivated by the frustration
                with the challenging aspects of the legacy system (like existing
                customers), or with the incumbent engineers who maintain the
                legacy system and won’t allow changing it quickly enough. In my
                opinion (and from my limited experience), such pivots are only
                really sucessful if at least one (or better two) following
                conditions are met:
              </p>
              <p name="da2c" id="da2c" class="graf graf--p graf-after--p">
                1) The rewrite is performed by a more able and experienced team
                than the one maintaining the legacy system
              </p>
              <p name="1ebb" id="1ebb" class="graf graf--p graf-after--p">
                2) The development and change process has been dramatically
                changed to address the most pressing challenges of the “legacy”
                process
              </p>
              <p name="bf4b" id="bf4b" class="graf graf--p graf-after--p">
                The way I see it, Ethereum 2.0 has not yet landed to the point
                where the development and change process kicks in, but we do not
                know what this process will look like. So I assume people would
                try to fall back on the same process that exists in Ethereum
                1.0. But… it is that process that the Ethereum 2.0 pivot sought
                to side-step.
              </p>
              <p name="c87e" id="c87e" class="graf graf--p graf-after--p">
                What I am really saying is that there is an under-appreciation
                of how important it is to invest into improving the development
                and change process in Ethereum 1.0 to make sure Ethereum 2.0
                lands on a good ground when it gets released. None of this will
                be a problem, of course, if Ethereum 2.0 will be perfect from
                the start and won’t need changing :)
              </p>
              <h3 name="7db4" id="7db4" class="graf graf--h3 graf-after--p">
                Conclusion
              </h3>
              <p
                name="def5"
                id="def5"
                class="graf graf--p graf-after--h3 graf--trailing"
              >
                This was somewhat rushed description of what I am having in mind
                when I say that Ethereum 1x is not just a set of roadmap items,
                but also an attempt to create a new, more efficient and
                inclusive process of delivering improvements to Ethereum.
              </p>
            </div>
          </div>
        </section>
      </section>
      <footer>
        <p>
          By
          <a href="https://medium.com/@akhounov" class="p-author h-card"
            >Alexey Akhunov</a
          >
          on
          <a href="https://medium.com/p/783efa23cf60"
            ><time class="dt-published" datetime="2019-05-08T22:12:05.225Z"
              >May 8, 2019</time
            ></a
          >.
        </p>
        <p>
          <a
            href="https://medium.com/@akhounov/ethereum-1x-as-an-attempt-to-change-the-process-783efa23cf60"
            class="p-canonical"
            >Canonical link</a
          >
        </p>
        <p>
          Exported from <a href="https://medium.com">Medium</a> on July 28,
          2020.
        </p>
      </footer>
    </article>
  </body>
</html>
